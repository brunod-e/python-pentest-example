import socket
import sys
from datetime import datetime

target = sys.argv[1]
ports = [21, 22, 23, 80, 443, 3389]

print("-" * 60)
print("Starting scan on:", target)
print("Start time:", str(datetime.now()))
print("-" * 60)

try:
    for port in ports:
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        socket.setdefaulttimeout(1)
        result = sock.connect_ex((target, port))
        if result == 0:
            print("Port {}: \t Open".format(port))
        else:
            print("Port {}: \t Closed".format(port))
        sock.close()

except KeyboardInterrupt:
    print("\nUser interrupted the scan.")
    sys.exit()

except socket.gaierror:
    print("\nHostname could not be resolved.")
    sys.exit()

except socket.error:
    print("\nCouldn't connect to server.")
    sys.exit()

print("-" * 60)
print("Scan complete")
print("-" * 60)
